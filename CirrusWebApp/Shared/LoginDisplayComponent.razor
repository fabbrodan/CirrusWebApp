@using System.Security.Claims
@using Microsoft.AspNetCore.Http

@inject IHttpContextAccessor _httpContextAccessor

@if (User.Identity.Name != null)
{
    <b>@Firstname @Lastname</b>
    <img style="width: 15px; height: 15px;" src="@Avatar" />
    <AuthorizeView>
        <Authorized>
            <a href="/LogoutCall">Sign Out</a>
        </Authorized>
    </AuthorizeView>
}

@code {

    private ClaimsPrincipal User;
    private string Firstname;
    private string Lastname;
    private string Avatar;

    protected override void OnInitialized()
    {
        base.OnInitialized();

        User = _httpContextAccessor.HttpContext.User ?? null;
        if (User != null)
        {
            Firstname = User.FindFirst(ClaimTypes.GivenName)?.Value ?? "";
            Lastname = User.FindFirst(ClaimTypes.Surname)?.Value ?? "";
            Avatar = User.FindFirst("urn:google:image")?.Value ?? "";
        }
    }
}
