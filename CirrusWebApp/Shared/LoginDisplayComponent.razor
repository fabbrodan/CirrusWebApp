@using System.Security.Claims
@using Microsoft.AspNetCore.Http
 
@inject IHttpContextAccessor _httpContextAccessor
@inject HttpClient httpClient

@if (User.Identity.Name != null)
{
    <img src="@Avatar" />
    <b>@Firstname @Lastname</b>
}

@code {
    private ClaimsPrincipal User;
    private string Firstname;
    private string Lastname;
    private string Avatar;

    protected override void OnInitialized()
    {
        base.OnInitialized();
        try
        {
            User = _httpContextAccessor.HttpContext.User ?? null;
            if(User != null)
            {
                Firstname = User.FindFirst(ClaimTypes.GivenName)?.Value ?? "";
                Lastname = User.FindFirst(ClaimTypes.Surname)?.Value ?? "";
                Avatar = User.FindFirst("urn:google:image")?.Value ?? "";
            }
        }
        catch
        {

        }
    }
}
